<Window x:Class="ProductionCompanyApp.Views.MaterialsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Материалы продукции"
        Height="550" Width="850"
        WindowStartupLocation="CenterOwner"
        Icon="/Resources/app.ico">

    <Grid Background="{StaticResource BackgroundColor}" Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" 
                Background="{StaticResource PrimaryColor}" 
                Padding="15"
                CornerRadius="5,5,0,0">
            <StackPanel>
                <TextBlock Text="{Binding ProductName}" 
                           FontSize="20" 
                           Foreground="White"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding ProductArticle}" 
                           FontSize="16" 
                           Foreground="White"
                           Opacity="0.9"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                <TextBlock Text="Используемые материалы" 
                           FontSize="19" 
                           Foreground="White"
                           Opacity="0.7"
                           HorizontalAlignment="Center"
                           Margin="0,8,0,0"/>
            </StackPanel>
        </Border>

        <!-- Таблица материалов -->
        <Border Grid.Row="1" 
                BorderBrush="{StaticResource SecondaryColor}" 
                BorderThickness="0,1,0,1"
                Padding="1">
            <DataGrid ItemsSource="{Binding Materials}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      FontSize="13"
                      HeadersVisibility="Column"
                      HorizontalGridLinesBrush="#E0E0E0"
                      VerticalGridLinesBrush="#E0E0E0">

                <!-- Стиль заголовков как в главном окне -->
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontFamily" Value="{StaticResource MainFont}"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Height" Value="36"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                        <Setter Property="Padding" Value="8,6"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <!-- Стиль строк -->
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Height" Value="36"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource SecondaryColor}"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="МАТЕРИАЛ" 
                                        Binding="{Binding MaterialName}" 
                                        Width="250">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Left"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="8,0,0,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="ТИП" 
                                        Binding="{Binding MaterialType}" 
                                        Width="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="КОЛИЧЕСТВО" 
                                        Binding="{Binding QuantityFormatted}" 
                                        Width="110">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="ЕД. ИЗМ." 
                                        Binding="{Binding Unit}" 
                                        Width="80">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="СТОИМОСТЬ ЕД." 
                                        Binding="{Binding CostFormatted}" 
                                        Width="120">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="0,0,12,0"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="ИТОГО" 
                                        Binding="{Binding TotalCostFormatted}" 
                                        Width="130">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Padding" Value="0,0,12,0"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Foreground" Value="{StaticResource PrimaryColor}"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Панель с кнопкой -->
        <Border Grid.Row="2" 
                Background="{StaticResource SecondaryColor}" 
                Padding="15"
                CornerRadius="0,0,5,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding Materials.Count, StringFormat=Всего материалов: {0}}"
                           VerticalAlignment="Center"
                           FontSize="14"
                           FontWeight="SemiBold"/>

                <Button Grid.Column="1"
                        Content="ЗАКРЫТЬ"
                        Width="120"
                        Click="CloseButton_Click"
                        Style="{StaticResource PrimaryButton}"
                        FontSize="16"
                        Padding="10,6"/>
            </Grid>
        </Border>
    </Grid>
</Window>