<Window x:Class="ProductionCompanyApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление продукцией"
        Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        Icon="/Resources/app.ico">

    <DockPanel Background="{StaticResource BackgroundColor}">
        <!-- Верхняя панель с логотипом -->
        <Border Background="{StaticResource PrimaryColor}" 
                Padding="12" 
                DockPanel.Dock="Top"
                Height="75">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Логотип и название -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Image Source="/Resources/logo.png"
                           Height="50" 
                           Margin="0,0,15,0"/>
                    <Border Width="1" 
                            Background="White" 
                            Margin="0,0,15,0"
                            VerticalAlignment="Stretch"
                            Opacity="0.3"/>
                    <TextBlock Text="ПРОИЗВОДСТВЕННАЯ КОМПАНИЯ" 
                               FontSize="18" 
                               Foreground="White"
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Заголовок системы -->
                <TextBlock Grid.Column="1" 
                           Text="СИСТЕМА УПРАВЛЕНИЯ ПРОДУКЦИЕЙ" 
                           FontSize="22" 
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Foreground="White"
                           FontWeight="Bold"/>
            </Grid>
        </Border>

        <!-- Панель навигации -->
        <Border Background="{StaticResource SecondaryColor}" 
                Padding="12,8" 
                DockPanel.Dock="Top">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="➕ ДОБАВИТЬ ПРОДУКТ"
                        Name="AddButton"
                        Click="AddButton_Click"
                        Style="{StaticResource PrimaryButton}"
                        FontSize="16"
                        Padding="12,6"
                        Width="200"/>

                <Button Content="✏️ РЕДАКТИРОВАТЬ"
                        Name="EditButton"
                        Click="EditButton_Click"
                        Style="{StaticResource SecondaryButton}"
                        FontSize="15"
                        Padding="10,5"
                        Width="160"
                        Margin="15,0,0,0"/>

                <Button Content="📦 МАТЕРИАЛЫ"
                        Name="MaterialsButton"
                        Click="MaterialsButton_Click"
                        Style="{StaticResource SecondaryButton}"
                        FontSize="15"
                        Padding="10,5"
                        Width="140"
                        Margin="15,0,0,0"/>

                <Button Content="🧮 РАСЧЁТ МАТЕРИАЛОВ"
                        Name="CalculationButton"
                        Click="CalculationButton_Click"
                        Style="{StaticResource SecondaryButton}"
                        FontSize="15"
                        Padding="10,5"
                        Width="180"
                        Margin="15,0,0,0"/>

                <Button Content="🔄 ОБНОВИТЬ"
                        Name="RefreshButton"
                        Click="RefreshButton_Click"
                        Style="{StaticResource SecondaryButton}"
                        FontSize="15"
                        Padding="10,5"
                        Width="120"
                        Margin="15,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- Основной контент -->
        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Таблица продукции -->
            <Border Grid.Row="0"
                    BorderBrush="{StaticResource SecondaryColor}"
                    BorderThickness="1"
                    CornerRadius="3"
                    Padding="1">
                <DataGrid Name="ProductsDataGrid"
                          ItemsSource="{Binding Products}"
                          SelectedItem="{Binding SelectedProduct}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          FontSize="13"
                          HeadersVisibility="Column"
                          HorizontalGridLinesBrush="#E0E0E0"
                          VerticalGridLinesBrush="#E0E0E0">

                    <!-- Стиль для ВСЕХ заголовков колонок -->
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontFamily" Value="{StaticResource MainFont}"/>
                            <Setter Property="FontSize" Value="14"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="Height" Value="36"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                            <Setter Property="Padding" Value="8,6"/>
                            <Setter Property="BorderThickness" Value="0"/>
                            <Setter Property="HorizontalAlignment" Value="Stretch"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <!-- Стиль для строк -->
                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Height" Value="36"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource SecondaryColor}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>

                    <DataGrid.Columns>
                        <!-- АРТИКУЛ -->
                        <DataGridTextColumn Header="АРТИКУЛ" 
                                            Binding="{Binding Article}"
                                            Width="130">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryColor}"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- ТИП ПРОДУКЦИИ -->
                        <DataGridTextColumn Header="ТИП ПРОДУКЦИИ" 
                                            Binding="{Binding ProductTypeName}"
                                            Width="180">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Left"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="8,0,0,0"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- НАИМЕНОВАНИЕ -->
                        <DataGridTextColumn Header="НАИМЕНОВАНИЕ" 
                                            Binding="{Binding Name}"
                                            Width="300">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Left"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="8,0,0,0"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- МИН. ЦЕНА -->
                        <DataGridTextColumn Header="МИН. ЦЕНА" 
                                            Binding="{Binding MinPartnerPrice, StringFormat=N2}"
                                            Width="120">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="0,0,12,0"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- ШИРИНА РУЛОНА -->
                        <DataGridTextColumn Header="ШИРИНА" 
                                            Binding="{Binding RollWidth, StringFormat=N2}"
                                            Width="100">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>

                        <!-- СТОИМОСТЬ МАТЕРИАЛОВ -->
                        <DataGridTextColumn Header="СТОИМ. МАТЕРИАЛОВ" 
                                            Binding="{Binding CalculatedCost, StringFormat=N2}"
                                            Width="150">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="HorizontalAlignment" Value="Right"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="Padding" Value="0,0,12,0"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryColor}"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- Статусная панель (ТОЛЬКО кол-во записей) -->
            <Border Grid.Row="1" 
                    Background="{StaticResource SecondaryColor}" 
                    Margin="0,10,0,0"
                    Padding="10"
                    CornerRadius="3">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Всего продуктов в базе: " 
                               FontSize="21"
                               FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Products.Count}" 
                               Foreground="{StaticResource PrimaryColor}"
                               FontWeight="Bold"
                               FontSize="21"
                               Margin="4,0,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>